import{b as u,f}from"../app.918fbe47.js";const m=r=>r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),g={__name:"TextReplacer",props:{container:{type:String,default:"body"},pattern:{type:String,required:!0},replacement:{type:String,required:!0},prefix:{type:String,default:""},suffix:{type:String,default:""}},setup(r){const e=r,s=(t,a,i)=>{a=new RegExp(m(a),"g"),document.querySelectorAll(t).forEach(p=>{p.innerHTML=p.innerHTML.replace(a,i)})};let n;return u(()=>{f(()=>e.replacement,t=>{if(e.replacement&&e.replacement!==""){const a=n||e.pattern,i=e.prefix+t+e.suffix;s(e.container,a,i),n=i}},{immediate:!0})}),(t,a)=>null}},o=30,d=async(r,e)=>l("latestVersion")?l("latestVersion"):await fetch(`https://api.github.com/repos/${r}/${e}/releases/latest`).then(s=>s.json()).then(s=>{var n;if(s.tag_name){const t=(n=s.tag_name.match(/(\d+\.\d+)[\-\.\da-zA-Z]+/)[0])!=null?n:"";return t!==""&&c("latestVersion",t,o),t}else return fetch(`https://api.github.com/repos/${r}/${e}/tags`).then(t=>t.json()).then(t=>{var a;if(t.length){const i=(a=t[0].name.match(/(\d+\.\d+)[\-\.\da-zA-Z]+/)[0])!=null?a:"";return i!==""&&c("latestVersion",i,o),i}return""})}),S=async(r,e)=>l("latestRelease")?l("latestRelease"):await fetch(`https://api.github.com/repos/${r}/${e}/releases/latest`).then(s=>s.json()).then(s=>{if(s.prerelease===!1){const n="latest";return c("latestRelease",n,o),n}else return fetch(`https://api.github.com/repos/${r}/${e}/tags`).then(n=>n.json()).then(n=>{var t;if(n.length){const a=(t=n[0].name.match(new RegExp("(?<=\\.\\d-)[^.]+"))[0])!=null?t:"";return a!==""&&c("latestRelease",a,o),a}return""})});function c(r,e,s){const n=new Date,t={value:e,expiry:n.getTime()+s*1e3};sessionStorage.setItem(r,JSON.stringify(t))}function l(r){const e=sessionStorage.getItem(r);if(!e)return null;const s=JSON.parse(e);return new Date().getTime()>s.expiry?(sessionStorage.removeItem(r),null):s.value}export{g as _,S as a,d as g};
